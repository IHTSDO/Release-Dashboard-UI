<div *ngIf="activeProduct" class="build-viewer text-center">
    <div class="container-fluid px-5">
        <h1 class="p-3 mb-0">{{activeProduct?.name}}</h1>
        <div class="row">
            <div class="col-6">
                <button class="float-left btn blue m-2" routerLink="/{{releaseCenterKey}}"><i class="fas fa-chevron-left pr-3"></i>BACK</button>
            </div>
            <div class="col-6">
                <button type="button" *ngIf="isAdminOrManagerOrLead()" class="btn green m-2 float-right" (click)="doOpeningBuildModal(true)">RUN NEW BUILD</button>
            </div>
        </div>

        <ng-container *ngIf="!activeBuild.configuration?.buildName">
            <div class="active-build rounded-lg text-center py-5 mb-3">
                <h2 class="font-weight-light m-5 py-5 text-slate-grey">- Please select a build below -</h2>
            </div>
        </ng-container>

        <ng-container *ngIf="activeBuild.configuration?.buildName">
            <div class="active-build rounded-lg mb-3">
                <div class="row text-left">
                    <div class="col-5 px-5">
                        <h3 class="my-3 mx-5"><b>INFO</b></h3>
                        <ul *ngIf="activeBuild.configuration?.buildName" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>BUILD NAME</b></li>
                            <li class="list-group-item w-75">{{activeBuild.configuration?.buildName}} {{activeBuild.id}}</li>
                        </ul>
                        <ul *ngIf="activeBuild.configuration?.effectiveTime" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>EFFECTIVE TIME</b></li>
                            <li class="list-group-item w-75">{{activeBuild.configuration?.effectiveTime}}</li>
                        </ul>
                        <ul *ngIf="activeBuild.configuration && !activeBuild.configuration.loadTermServerData && !activeBuild.configuration.defaultBranchPath" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>LOCAL INPUT FILES</b></li>
                            <li class="list-group-item w-75">
                                <input class="ml-2" type="checkbox" (click)="$event.preventDefault();$event.stopPropagation()" [(ngModel)]="activeBuild.configuration && !activeBuild.configuration.loadTermServerData && !activeBuild.configuration.defaultBranchPath">
                            </li>
                        </ul>
                        <ul *ngIf="activeBuild.configuration?.branchPath && activeBuild.configuration.loadTermServerData" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>EXPORT TYPE</b></li>
                            <li class="list-group-item w-75">{{activeBuild.configuration ? (activeBuild.configuration.exportType ? (activeBuild.configuration.exportType.replaceAll('_', ' ') | titlecase) : '' ) : ''}}</li>
                        </ul>
                        <ul *ngIf="activeBuild.configuration?.branchPath && activeBuild.configuration.loadTermServerData" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>BRANCH</b></li>
                            <li class="list-group-item w-75">{{activeBuild.configuration?.branchPath}}</li>
                        </ul>
                        <ul *ngIf="activeBuild.qaTestConfig?.maxFailureExport" class="list-group list-group-horizontal m-3">
                            <li class="list-group-item bg-alto-white w-25"><b>FAILURE MAX</b></li>
                            <li class="list-group-item w-75">{{activeBuild.qaTestConfig?.maxFailureExport}}</li>
                        </ul>
                    </div>

                    <div class="col-4 px-5">
                        <h3 class="my-3 mx-5"><b>STATUS</b></h3>
                        <ul *ngIf="activeBuild?.status" class="list-group list-group-horizontal m-2 status">
                            <li class="list-group-item bg-alto-white w-25"><b>STATUS</b></li>
                            <li class="list-group-item w-75">{{(activeBuild.status ? activeBuild.status.replaceAll('_', ' ') : '')  | titlecase}}</li>
                        </ul>
                        <button type="button" class="btn blue m-2 d-block" *ngIf="isAdminOrManagerOrLead()" [disabled]="!activeBuild.id" (click)="viewRunningLog(activeBuild)"><i class="fas fa-external-link-alt pr-2"></i>VIEW PROCESS</button>
                        <button type="button" class="btn red m-2 d-block" *ngIf="isAdminOrManagerOrLead()" [disabled]="!activeBuild.id || activeBuild.status !== 'BUILDING' || activeBuild.buildDeleting || activeBuild.buildCanceling" (click)="openModal('stop-build-confirmation-modal')"><i class="fas fa-times pr-2"></i>{{activeBuild.buildCanceling ? 'STOPPING...' : 'STOP BUILD' }}</button>
                    </div>

                    <div class="col-3 px-5">
                        <h3 class="my-3 mx-5"><b>RESULT</b></h3>
                        <button type="button" class="btn green m-2 d-block"
                                *ngIf="canPublishBuild()"
                                [disabled]="!activeBuild.id || activeBuild.buildDeleting || activeBuild.buildPublishing || (activeBuild.status!== 'RELEASE_COMPLETE' && activeBuild.status!== 'RELEASE_COMPLETE_WITH_WARNINGS') || (activeBuild.tags && activeBuild.tags.indexOf('PUBLISHED') !== -1)"
                                (click)="openPublishingBuildConfirmationModal()"><i class="fas fa-paper-plane pr-2"></i>{{activeBuild.buildPublishing ? 'PUBLISHING...' : 'PUBLISH BUILD'}}</button>
                        <button type="button" *ngIf="canDeleteBuild()" class="btn red m-2 d-block" [disabled]="!activeBuild.id || activeBuild.buildDeleting || activeBuild.buildPublishing" (click)="openModal('delete-confirmation-modal')"><i class="fas fa-times pr-2"></i>{{activeBuild.buildDeleting? 'DELETING...' : 'DELETE BUILD'}}</button>
                        <button type="button" *ngIf="canGenerateJiraTicket() && activeBuild.rvfURL" class="btn blue m-2 d-block" [disabled]="!activeBuild.id || activeBuild.buildDeleting" (click)="getFailureJiraAssociations(); loadRvfReport(activeBuild); openModal('generate-jira-tickets-modal')"><i class="fas fa-ticket-alt pr-2"></i>GENERATE JIRA TICKETS</button>
                    </div>
                </div>
            </div>
        </ng-container>

        <div class="row">
            <div class="col text-left">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle m-2 float-left" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{view === 'ALL_RELEASES' ? 'ALL RELEASES' : view}}
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" (click)="view = 'DEFAULT'; pageNumber = 1; loadBuilds()">DEFAULT</a>
                        <a class="dropdown-item" (click)="view = 'ALL_RELEASES'; pageNumber = 1; loadBuilds()">ALL RELEASES</a>
                        <a class="dropdown-item" (click)="view = 'PUBLISHED'; pageNumber = 1; loadBuilds()">PUBLISHED</a>
                        <a class="dropdown-item" (click)="view = 'UNPUBLISHED'; pageNumber = 1; loadBuilds()">UNPUBLISHED</a>
                    </div>
                </div>
            </div>
            <div class="col text-right">
                <button type="button" class="btn orange m-2" *ngIf="isAdminOrManagerOrLead()" [disabled]="!activeBuild.id || activeBuild.buildDeleting" (click)="viewLog(activeBuild)">VIEW LOG</button>
                <button type="button" class="btn blue m-2" *ngIf="isAdminOrManagerOrLead()" (click)="openModal('hidden-builds-modal'); loadHiddenBuilds()">VIEW HIDDEN</button>
                <button type="button" class="btn blue m-2" (click)="loadBuilds()">VIEW ALL</button>
                <button type="button" class="btn green m-2" *ngIf="isAdminOrManagerOrLead()" [disabled]="!activeBuild.id" (click)="doOpeningBuildModal()">CLONE</button>
            </div>
        </div>

        <table class="table table-bordered table-striped table-sortable" *ngIf="buildsLoading">
            <tr>
                <th class="w-5" *ngIf="isAdminOrManagerOrLead()">URL</th>
                <th [ngClass]="{'asc': buildTableSortingObj['buildName']['direction'] === 'asc', 'desc': buildTableSortingObj['buildName']['direction'] === 'desc'}">Build Name
                    <span *ngIf="hasSortingPriority('buildName')" class="priority">{{buildTableSortingObj['buildName']['priority'] + 1}}</span>
                </th>
                <th [ngClass]="{'asc': buildTableSortingObj['creationTime']['direction'] === 'asc', 'desc': buildTableSortingObj['creationTime']['direction'] === 'desc'}">Build ID
                    <span *ngIf="hasSortingPriority('creationTime')" class="priority">{{buildTableSortingObj['creationTime']['priority'] + 1}}</span>
                </th>
                <th [ngClass]="{'asc': buildTableSortingObj['status']['direction'] === 'asc', 'desc': buildTableSortingObj['status']['direction'] === 'desc'}">Status
                    <span *ngIf="hasSortingPriority('status')" class="priority">{{buildTableSortingObj['status']['priority'] + 1}}</span>
                </th>
                <th [ngClass]="{'asc': buildTableSortingObj['buildUser']['direction'] === 'asc', 'desc': buildTableSortingObj['buildUser']['direction'] === 'desc'}">User
                    <span *ngIf="hasSortingPriority('buildUser')" class="priority">{{buildTableSortingObj['buildUser']['priority'] + 1}}</span>
                </th>
                <th *ngIf="isAdminOrManagerOrLead()">User Roles</th>
                <th *ngIf="isAdminOrManagerOrLead()">Log</th>
                <th *ngIf="isAdminOrManagerOrLead()">Release</th>
                <th >RVF Report</th>
                <th>Config</th>
                <th>Manifest</th>
                <th *ngIf="isAdminOrManagerOrLead()">Visibility</th>
                <th class="w-9">Tags</th>
            </tr>
            <tr >
                <td colspan="13"><div class="loading">Loading</div></td>
            </tr>
        </table>
        <table class="table table-bordered table-striped table-sortable" *ngIf="!buildsLoading">
            <tr>
                <th class="w-5" *ngIf="isAdminOrManagerOrLead()">URL</th>
                <th [appSort] (sortClick)="handleSortClickOnBuildTable($event, 'buildName')" [ngClass]="{'asc': buildTableSortingObj['buildName']['direction'] === 'asc', 'desc': buildTableSortingObj['buildName']['direction'] === 'desc', 'sortable': !buildTableSortingObj['buildName']['direction']}">Build Name
                    <span *ngIf="hasSortingPriority('buildName')" class="priority">{{buildTableSortingObj['buildName']['priority'] + 1}}</span>
                    <span *ngIf="hasSortingPriority('buildName')" class="clear-sort"><i class="material-icons" title="Clear sort" (click)="clearSort('buildName'); $event.stopPropagation()">cancel</i></span>
                </th>
                <th style="min-width: 87px;" [appSort] (sortClick)="handleSortClickOnBuildTable($event, 'creationTime')" [ngClass]="{'asc': buildTableSortingObj['creationTime']['direction'] === 'asc', 'desc': buildTableSortingObj['creationTime']['direction'] === 'desc', 'sortable': !buildTableSortingObj['creationTime']['direction']}">Build ID
                    <span *ngIf="hasSortingPriority('creationTime')" class="priority">{{buildTableSortingObj['creationTime']['priority'] + 1}}</span>
                    <span *ngIf="hasSortingPriority('creationTime')" class="clear-sort"><i class="material-icons" title="Clear sort" (click)="clearSort('creationTime'); $event.stopPropagation()">cancel</i></span>
                </th>
                <th [style.min-width]="getStatusColumnWidth()" [appSort] (sortClick)="handleSortClickOnBuildTable($event, 'status')" [ngClass]="{'asc': buildTableSortingObj['status']['direction'] === 'asc', 'desc': buildTableSortingObj['status']['direction'] === 'desc', 'sortable': !buildTableSortingObj['status']['direction']}">Status
                    <span *ngIf="hasSortingPriority('status')" class="priority">{{buildTableSortingObj['status']['priority'] + 1}}</span>
                    <span *ngIf="hasSortingPriority('status')" class="clear-sort"><i class="material-icons" title="Clear sort" (click)="clearSort('status'); $event.stopPropagation()">cancel</i></span>
                </th>
                <th [appSort] (sortClick)="handleSortClickOnBuildTable($event, 'buildUser')" [ngClass]="{'asc': buildTableSortingObj['buildUser']['direction'] === 'asc', 'desc': buildTableSortingObj['buildUser']['direction'] === 'desc', 'sortable': !buildTableSortingObj['buildUser']['direction']}">User
                    <span *ngIf="hasSortingPriority('buildUser')" class="priority">{{buildTableSortingObj['buildUser']['priority'] + 1}}</span>
                    <span *ngIf="hasSortingPriority('buildUser')" class="clear-sort"><i class="material-icons" title="Clear sort" (click)="clearSort('buildUser'); $event.stopPropagation()">cancel</i></span>
                </th>
                <th class="w-10" *ngIf="isAdminOrManagerOrLead()">User Roles</th>
                <th class="w-5" *ngIf="isAdminOrManagerOrLead()">Log</th>
                <th *ngIf="isAdminOrManagerOrLead()">Release</th>
                <th>RVF Report</th>
                <th>Config</th>
                <th>Manifest</th>
                <th *ngIf="isAdminOrManagerOrLead()">Visibility</th>
                <th class="w-9">Tags</th>
            </tr>
            <tr *ngIf="builds?.length === 0">
                <td colspan="13">No builds found.</td>
            </tr>
            <tr *ngFor="let build of builds | paginate: {id: 'builds_table', itemsPerPage: pageSize, currentPage: pageNumber, totalItems: totalBuild}" (click)="setActiveBuild(build)" [class.active]="activeBuild.id === build.id">
                <td class="pb-0" *ngIf="isAdminOrManagerOrLead()">
                    <button type="button" class="btn blue text-nowrap" (click)="openBuildURL(build); $event.stopPropagation()" title="Build URL"><i class="fas fa-external-link-alt pr-2"></i>OPEN</button>
                </td>
                <td class="text-left" title="{{build?.configuration.buildName}}">{{build?.configuration.buildName}}</td>
                <td class="text-left" style="word-break: break-all;">{{build?.id.substring(0,10)}}{{build?.id.substring(10,19)}}</td>
                <td class="text-left" [class.hasWarnings]="build.status === 'RELEASE_COMPLETE_WITH_WARNINGS'">{{build?.status.replaceAll('_', ' ') | titlecase}}</td>
                <td class="">{{build?.buildUser}}</td>
                <td class="text-left" *ngIf="isAdminOrManagerOrLead()">
                    <ng-container *ngFor="let role of build?.userRoles" >
                        <div class="rounded-pill px-2 m-1 text-nowrap tag">{{role.replaceAll('_', ' ') | titlecase}}</div>
                    </ng-container>
                </td>
                <td class="" *ngIf="isAdminOrManagerOrLead()">
                    <ng-container *ngIf="build.buildDownloadingLog">
<!--                        <div class="btn-log-download badge loading">Downloading</div>-->
                        <button type="button" class="btn purple text-nowrap" title="Download Log"><span class="pr-2"><i class="fas fa-circle-notch fa-spin" style="width: 12px; height: 12px"></i></span>DOWNLOADING</button>
                    </ng-container>
                    <ng-container *ngIf="!build.buildDownloadingLog">
                        <button type="button" class="btn purple text-nowrap" (click)="downloadBuildLog(build); $event.stopPropagation()" title="Download Log"><i class="fas fa-download pr-2"></i>.TXT</button>
                    </ng-container>
                </td>
                <td class="" *ngIf="isAdminOrManagerOrLead()" style="width: auto;">
                    <div class="d-block mb-2">
                        <ng-container *ngIf="build.buildDownloadingPackage">
                            <button type="button" class="btn purple text-nowrap w-100" title="Download Log"><span class="pr-2"><i class="fas fa-circle-notch fa-spin" style="width: 12px; height: 12px"></i></span>DOWNLOADING</button>
<!--                            <div class="btn-package-download badge loading">Downloading</div>-->
                        </ng-container>
                        <ng-container *ngIf="!build.buildDownloadingPackage">
                            <button type="button" class="btn purple text-nowrap w-100" (click)="downloadBuildPackage(build); $event.stopPropagation()" title="Download Release Package{{build.configuration.buildPackageName ? ': ' + build.configuration.buildPackageName : ''}}"><i class="fas fa-download pr-2"></i>.ZIP</button>
                        </ng-container>
                    </div>
                    <div class="d-block">
                        <button type="button" class="btn pink text-nowrap w-100 narrow" (click)="downloadMd5(build); $event.stopPropagation()" title="Download MD5 file"><i class="fas fa-download pr-2"></i>.MD5</button>
                    </div>
                </td>
                <td class="">
                    <ng-container *ngIf="build.rvfURL">
                        <button type="button" class="btn blue text-nowrap" (click)="openRvfReport(build); $event.stopPropagation()" title="Open RVF Report"><i class="fas fa-external-link-alt pr-2"></i>OPEN</button>
                    </ng-container>
                </td>
                <td class="">
                    <button type="button" class="btn slate text-nowrap" (click)="viewBuildConfigurations(build); $event.stopPropagation()" title="View Build Configurations"><i class="fas fa-cog pr-2"></i>SETTINGS</button>
                </td>
                <td class="">
                    <button class="btn blue text-nowrap" (click)="loadManifestFile(build); $event.stopPropagation()" title="View Manifest File"><i class="fas fa-external-link-alt pr-2"></i>OPEN</button>
                </td>
                <td class="" *ngIf="isAdminOrManagerOrLead()">
                    <button type="button" class="btn slate text-nowrap" (click)="openBuildVisibilityModal(build); $event.stopPropagation()" title="Hide Build"><i class="fas fa-eye-slash pr-2"></i>HIDE</button>
                </td>
<!--                <td class=""><span *ngIf="build.tags">{{build.tags.join(', ').replaceAll('_', ' ') | titlecase}}</span>&nbsp;<span *ngIf="build.tags && isAdminOrManagerOrLead()" (click)="openTaggingModal(build); $event.stopPropagation()" title="Edit Tags"><i class="material-icons text-fruit-salad">edit</i></span>-->
<!--                    <button *ngIf="!build.tags && isAdminOrManagerOrLead()" class="btn-circle btn-blue text-center" (click)="openTaggingModal(build); $event.stopPropagation()" title="Add Tags"><i class="material-icons">add</i></button>-->
<!--                </td>-->
                <td>
                    <ng-container *ngFor="let tag of build?.tags" >
                        <div class="rounded-pill px-2 m-1 text-nowrap tag">{{tag.replaceAll('_', ' ') | titlecase}}</div>
                    </ng-container>
                    <div *ngIf="isAdminOrManagerOrLead()" class="rounded-pill px-2 m-1 text-nowrap tag add" (click)="openTaggingModal(build); $event.stopPropagation()">
                        <i class="fas fa-plus pr-2"></i>ADD
                    </div>
                </td>
            </tr>
        </table>
        <pagination-controls id="builds_table"
                      (pageChange)="handlePageChange($event)"
                      directionLinks="true"
                      autoHide="true"
                      responsive="true"
                      previousLabel="Previous"
                      nextLabel="Next"
                      *ngIf="!buildsLoading">
        </pagination-controls>
    </div>
</div>

<app-modal id="hidden-builds-modal" class="modal add-modal" size="large">
    <h3 header class="mb-0">Hidden Builds</h3>
    <div body class="text-center p-5">
        <div *ngIf="hiddenBuildsLoading" class="loading">Loading</div>
        <table class="table table-bordered" *ngIf="!hiddenBuildsLoading">
            <tr>
                <th>Build Name</th>
                <th>Build Date</th>
                <th class="w-12">Status</th>
                <th>User</th>
                <th class="w-15">Tags</th>
                <th class="w-15"></th>
            </tr>
            <tr *ngIf="hiddenBuilds?.length === 0">
                <td colspan="11">No hidden builds found.</td>
            </tr>
            <tr *ngFor="let build of hiddenBuilds | paginate: {id: 'hidden_builds_table', itemsPerPage: 10, currentPage: p1, totalItems: hiddenBuilds?.length}">
                <td class="pb-0 text-left" title="{{build?.configuration.buildName}}">{{build?.configuration.buildName}}</td>
                <td class="pb-0">{{build?.id}}</td>
                <td class="pb-0" [class.hasWarnings]="build.status === 'RELEASE_COMPLETE_WITH_WARNINGS'">{{build?.status.replaceAll('_', ' ') | titlecase}}</td>
                <td class="pb-0">{{build?.buildUser}}</td>
                <td class="pb-0">
                    <ng-container *ngFor="let tag of build?.tags" >
                        <div class="rounded-pill px-2 m-1 text-nowrap tag">{{tag.replaceAll('_', ' ') | titlecase}}</div>
                    </ng-container>
                </td>
<!--                <td class="pb-0 pt-0"><button style="margin-top: 1px; margin-bottom: 1px;" type="button" class="btn-blue" (click)="openUnhideBuildConfirmationModal(build)">Un-hide</button></td>-->
                <td class="pb-2">
                    <button class="btn hide" (click)="openUnhideBuildConfirmationModal(build)"><i class="fas fa-eye pr-2"></i>UN-HIDE</button>
                </td>

            </tr>
        </table>
        <pagination-controls id="hidden_builds_table"
                      (pageChange)="p1 = $event"
                      directionLinks="true"
                      autoHide="true"
                      responsive="true"
                      previousLabel="Previous"
                      nextLabel="Next"
                      *ngIf="!hiddenBuildsLoading">
        </pagination-controls>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('hidden-builds-modal')">CLOSE</button>
    </div>
</app-modal>

<!-- BUILD MODAL -->
<app-modal id="build-modal" class="modal build-modal">
    <h3 header class="mb-0">Build Configurations</h3>
    <div body class="text-center p-5">
        <p>Please enter the details for the Build:</p>

        <div class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Use Local Input Files</span>
                </div>
                <div class="input-group-append">
                    <div class="input-group-text bg-white">
                        <input type="checkbox" [(ngModel)]="useLocalInputFiles">
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Build Name</span>
                </div>
                <input type="text" class="form-control" [disabled]="buildTriggering" [(ngModel)]="buildParams.buildName">
            </div>
        </div>

        <div class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Effective Time</span>
                </div>
                <input type="text" class="form-control" bsDatepicker [disabled]="buildTriggering" [(bsValue)]="buildParams.effectiveDate" value="{{ buildParams.effectiveDate | date:'yyyy-MM-dd' }}">
            </div>
        </div>

        <div *ngIf="useLocalInputFiles" class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Build Name</span>
                </div>
                <input type="file" class="form-control" multiple #uploadInputFilesInput (change)="selectInputFiles($event.target.files)">
            </div>
        </div>

        <div *ngIf="!useLocalInputFiles" class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" matTooltip="Passes the type of export to Term Server to export the contents. Possible values are &quot;Published&quot;, &quot;Unpublished&quot;, &quot;Feedback Fix&quot;.
Use &quot;Published&quot; to retrieve all Production data that has been versioned with the &quot;Effective Time&quot;.
Use &quot;Unpublished&quot; to retrieve all data from the term server regardless of versioned dates.
Use &quot;Feedback Fix&quot; to retrieve all data from the latest HotFix branch (Fix02, Fix03, etc) + the Production data in the Release Branch that has been versioned with the &quot;Effective Time&quot;.">Export Type</span>
                </div>
                <select [disabled]="buildTriggering" class="form-control" (change)="buildParams.enableTraceabilityValidation= (buildParams.exportType === 'PUBLISHED' ? false : true)" [(ngModel)]="buildParams.exportType">
                    <option value="PUBLISHED">Published</option>
                    <option value="UNPUBLISHED">Unpublished</option>
                    <option value="FEEDBACK_FIX">Feedback Fix</option>
                </select>
            </div>
        </div>

        <div *ngIf="!useLocalInputFiles" class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Branch</span>
                </div>
                <input type="text" class="form-control" [disabled]="buildTriggering" [(ngModel)]="buildParams.branch">
            </div>
        </div>

        <div class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" matTooltip="Defines the number of errors that are seen/displayed (RVF)">Failure Max</span>
                </div>
                <input type="text" class="form-control" [disabled]="buildTriggering" [(ngModel)]="buildParams.maxFailureExport">
            </div>
        </div>

        <div *ngIf="!useLocalInputFiles" class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" matTooltip="Passes to RVF to enable Traceability Validation. This option is only available for non Published Export types">Enable Traceability Validation</span>
                </div>
                <div class="input-group-append">
                    <div class="input-group-text bg-white">
                        <input type="checkbox" [disabled]="buildParams.exportType === 'PUBLISHED'" [(ngModel)]="buildParams.enableTraceabilityValidation">
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="useLocalInputFiles" class="col-12">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" matTooltip="This option will force the Release Service to conduct file transformation before packaging. This transformation will replace all effectiveTimes that are already populated in the Release files with the value entered into the effectiveTime field above. This should only be used in exceptional circumstances, as for most input files (especially those exported from the IHTSDO termServer) these dates will be correct for each record and therefore should be retained instead of being replaced">Enable Traceability Validation</span>
                </div>
                <div class="input-group-append">
                    <div class="input-group-text bg-white">
                        <input type="checkbox" [(ngModel)]="buildParams.replaceExistingEffectiveTime">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div footer>
        <button type="button" class="btn" [disabled]="buildTriggering" (click)="closeModal('build-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" [disabled]="buildTriggering" (click)="runBuild()">RUN</button>
    </div>
</app-modal>

<!--Build deletion confirmation-->
<app-modal id="delete-confirmation-modal" class="modal build-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-center p-5">
        <p>Are you sure you want to delete this build?</p>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('delete-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="deleteBuild(activeBuild)">ACCEPT</button>
    </div>
</app-modal>

<!--Build publishing confiramation-->
<app-modal id="publish-build-confirmation-modal" class="modal build-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-left p-5">
        <p>{{message}}</p>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('publish-build-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="publishBuild(activeBuild)">ACCEPT</button>
    </div>
</app-modal>

<app-modal id="build-tagging-modal" class="modal build-modal">
    <h3 header class="mb-0">Tagging</h3>
    <div body class="text-left p-5">
        <div *ngFor="let tag of allTags">
            <div class="w-25 d-inline-block"></div>
            <label>
              <input type="checkbox" [value]="tag.value" [(ngModel)]="selectedTags[tag.value]"/>
              {{tag.label}}
            </label>
          </div>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('build-tagging-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="saveTags()">SAVE</button>
    </div>
</app-modal>

<!--Generate JIRA Tickets modal-->
<app-modal id="generate-jira-tickets-modal" class="modal add-modal" size="xlarge">
    <h3 header class="mb-0">Generate JIRA Tickets</h3>
    <div body class="text-left p-5">
        <p class="text-center loading" *ngIf="rvfReportLoading">Loading</p>
        <h4 *ngIf="!rvfReportLoading"><b>ERRORS</b></h4>
        <table class="table table-bordered table-sortable" *ngIf="!rvfReportLoading">
            <tr class="text-center">
                <th><input type="checkbox" [(ngModel)]="selectAllError" (click)="toggleSelectAllFailures('error')"></th>
                <th [appSort]="assertionsFailed" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'testType', 'error')" [ngClass]="{'asc': errorTableSortingObj['testType'] === 'asc', 'desc': errorTableSortingObj['testType'] === 'desc', 'sortable': !errorTableSortingObj['testType']}" data-name="testType">Type</th>
                <th [appSort]="assertionsFailed" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'assertionUuid', 'error')" [ngClass]="{'asc': errorTableSortingObj['assertionUuid'] === 'asc', 'desc': errorTableSortingObj['assertionUuid'] === 'desc', 'sortable': !errorTableSortingObj['assertionUuid']}" data-name="assertionUuid">Assertion ID</th>
                <th [appSort]="assertionsFailed" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'assertionText', 'error')" [ngClass]="{'asc': errorTableSortingObj['assertionText'] === 'asc', 'desc': errorTableSortingObj['assertionText'] === 'desc', 'sortable': !errorTableSortingObj['assertionText']}" data-name="assertionText">Assertion Text</th>
                <th [appSort]="assertionsFailed" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'failureCount', 'error')" [ngClass]="{'asc': errorTableSortingObj['failureCount'] === 'asc', 'desc': errorTableSortingObj['failureCount'] === 'desc', 'sortable': !errorTableSortingObj['failureCount']}" data-name="failureCount" style="min-width: 9.5em;">Total Failures</th>
                <th [appSort]="assertionsFailed" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'jiraUrl', 'error')" [ngClass]="{'asc': errorTableSortingObj['jiraUrl'] === 'asc', 'desc': errorTableSortingObj['jiraUrl'] === 'desc', 'sortable': !errorTableSortingObj['jiraUrl']}" data-name="jiraUrl">JIRA Link</th>
            </tr>
            <tr *ngFor="let failure of assertionsFailed">
                <td class="pb-0"><input *ngIf="!failure.jiraUrl" type="checkbox" [(ngModel)]="failure.checked" (click)="toggleSelectFailure('error')"></td>
                <td class="pb-0 text-center" style="min-width: 8rem;">{{failure.testType.replace('DROOL_RULES', 'DROOLS')}}</td>
                <td class="pb-0 text-center" style="width: 27rem;">{{failure.assertionUuid}}</td>
                <td class="pb-0 text-left"> {{failure.assertionText}}</td>
                <td class="pb-0 text-center">{{failure.failureCount}}</td>
                <td class="pb-0 text-center" style="width: 10rem;"><a href="{{failure.jiraUrl}}" *ngIf="failure.jiraUrl" (click)="$event.stopPropagation()" title="JIRA URL" target="_blank">{{failure?.jiraUrl.substring(failure.jiraUrl.lastIndexOf('/') + 1)}}</a></td>
            </tr>
        </table>
        <br/>
        <h4 *ngIf="!rvfReportLoading"><b>WARNINGS</b></h4>
        <table class="table table-bordered table-sortable" *ngIf="!rvfReportLoading">
            <tr class="text-center">
                <th><input type="checkbox" [(ngModel)]="selectAllWarning" (click)="toggleSelectAllFailures('warning')"></th>
                <th [appSort]="assertionsWarning" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'testType', 'warning')" [ngClass]="{'asc': warningTableSortingObj['testType'] === 'asc', 'desc': warningTableSortingObj['testType'] === 'desc', 'sortable': !warningTableSortingObj['testType']}" data-name="testType">Type</th>
                <th [appSort]="assertionsWarning" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'assertionUuid', 'warning')" [ngClass]="{'asc': warningTableSortingObj['assertionUuid'] === 'asc', 'desc': warningTableSortingObj['assertionUuid'] === 'desc', 'sortable': !warningTableSortingObj['assertionUuid']}" data-name="assertionUuid">Assertion ID</th>
                <th [appSort]="assertionsWarning" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'assertionText', 'warning')" [ngClass]="{'asc': warningTableSortingObj['assertionText'] === 'asc', 'desc': warningTableSortingObj['assertionText'] === 'desc', 'sortable': !warningTableSortingObj['assertionText']}" data-name="assertionText">Assertion Text</th>
                <th [appSort]="assertionsWarning" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'failureCount', 'warning')" [ngClass]="{'asc': warningTableSortingObj['failureCount'] === 'asc', 'desc': warningTableSortingObj['failureCount'] === 'desc', 'sortable': !warningTableSortingObj['failureCount']}" data-name="failureCount" style="min-width: 9.5em;">Total Failures</th>
                <th [appSort]="assertionsWarning" (sortClick)="handleSortClickOnJiraGenerationTable($event, 'jiraUrl', 'warning')" [ngClass]="{'asc': warningTableSortingObj['jiraUrl'] === 'asc', 'desc': warningTableSortingObj['jiraUrl'] === 'desc', 'sortable': !warningTableSortingObj['jiraUrl']}" data-name="jiraUrl">JIRA Link</th>
            </tr>
            <tr *ngFor="let failure of assertionsWarning">
                <td class="pb-0"><input *ngIf="!failure.jiraUrl" type="checkbox" [(ngModel)]="failure.checked" (click)="toggleSelectFailure('warning')"></td>
                <td class="pb-0 text-center" style="min-width: 8rem;">{{failure.testType.replace('DROOL_RULES', 'DROOLS')}}</td>
                <td class="pb-0 text-center" style="width: 27rem;">{{failure.assertionUuid}}</td>
                <td class="pb-0 text-left"> {{failure.assertionText}}</td>
                <td class="pb-0 text-center">{{failure.failureCount}}</td>
                <td class="pb-0 text-center" style="width: 10rem;"><a href="{{failure.jiraUrl}}" *ngIf="failure.jiraUrl" (click)="$event.stopPropagation()" title="JIRA URL" target="_blank">{{failure?.jiraUrl.substring(failure.jiraUrl.lastIndexOf('/') + 1)}}</a></td>
            </tr>
        </table>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('generate-jira-tickets-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="validateFailuresSelection()">ACCEPT</button>
    </div>
</app-modal>

<!--Jira generation confirmation-->
<app-modal id="jira-generation-confirmation-modal" class="modal build-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-center p-5">
        <p>Do you really want to generate JIRA tickets for the selected failures?</p>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('jira-generation-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="generateJiraTickets()">CONFIRM</button>
    </div>
</app-modal>

<!--Jira generation summary-->
<app-modal id="jira-generation-summary-modal" class="modal success-modal">
    <h3 header class="mb-0">Summary</h3>
    <div body class="p-5">
        <div class="success pl-0"><i class="material-icons">check_circle</i>&nbsp;<div class="d-inline position-absolute pt-2">{{message}}</div></div>
        <div class="pl-5" *ngFor="let failureJiraAssociation of newFailureJiraAssociations">
            <a href="{{failureJiraAssociation.jiraUrl}}" target="_blank">{{failureJiraAssociation.jiraUrl}}</a>
        </div>
        <br/>
        <div *ngIf="duplicatedFailureJiraAssociations?.length !== 0">
            <div class="error pl-0"><i class="material-icons">cancel</i>&nbsp;<div class="d-inline position-absolute pt-2">Errors:</div></div>
            <div class="pl-5" *ngFor="let duplicateJiraAssociation of duplicatedFailureJiraAssociations">
                <p>The assertion with id {{duplicateJiraAssociation.assertionId}} has been created in the build {{duplicateJiraAssociation.buildId}} (<a href="{{duplicateJiraAssociation.jiraUrl}}" target="_blank">{{duplicateJiraAssociation?.jiraUrl.substring(duplicateJiraAssociation.jiraUrl.lastIndexOf('/') + 1)}}</a>) </p>
            </div>

        </div>

    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('jira-generation-summary-modal')">CLOSE</button>
    </div>
</app-modal>

<!--Stop Build confiramation-->
<app-modal id="stop-build-confirmation-modal" class="modal build-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-center p-5">
        <p>Are you sure you want to stop this build?</p>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('stop-build-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn reject ml-3" (click)="stopBuild(activeBuild)">STOP</button>
    </div>
</app-modal>

<!--View Log Model-->
<app-modal id="view-build-log-modal" class="modal view-build-log-modal" size="large">
    <h3 header class="mb-0">Log</h3>
    <div body class="text-left p-5" [class.text-center]="buildLogLoading">
        <div class="loading" *ngIf="buildLogLoading">Loading</div>
        <p *ngIf="!buildLogLoading">{{buildLog}}</p>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('view-build-log-modal')">CLOSE</button>
    </div>
</app-modal>

<!--Waiting Model-->
<app-modal id="waiting-modal" class="modal" hideHeader="true" hideFooter="true" disableBackgroundClickEvent="true" size="small">
    <div body class="text-left p-5 text-center">
        <div class="loading">{{action}}</div>
    </div>
</app-modal>

<app-modal id="view-build-configuration-modal" class="modal view-build-configuration-modal" [size]="'ultra-wide'">
    <h3 header class="mb-0">Build Configurations</h3>
    <div body>
        <ng-container *ngIf="selectedBuild.configuration">
            <h2 class="m-3">{{selectedBuild.configuration.buildName}}<span class="px-3 m-3 font-italic">See&nbsp;<a href="https://confluence.ihtsdotools.org/pages/viewpage.action?spaceKey=RMT&title=SRS+Script+Client+parameter+documentation">confluence</a>&nbsp;page for more information about these parameters.</span></h2>
            <div class="row mx-0">
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The effective date of the release. Please ensure that this value matches the effective date in RF2 filenames in the manifest file. Example: 2015-07-31">Effective Time</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.effectiveTime">
                    </div>
                </div>
                <div *ngIf="selectedBuild.configuration && !selectedBuild.configuration.loadTermServerData && !selectedBuild.configuration.defaultBranchPath" class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Use Local Input Files</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration && !selectedBuild.configuration.loadTermServerData && !selectedBuild.configuration.defaultBranchPath">
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedBuild.configuration?.branchPath && selectedBuild.configuration.loadTermServerData" class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                        <span class="input-group-text" matTooltip="Passes the type of export to Term Server to export the contents. Possible values are &quot;Published&quot;, &quot;Unpublished&quot;, &quot;Feedback Fix&quot;.
Use &quot;Published&quot; to retrieve all Production data that has been versioned with the &quot;Effective Time&quot;.
Use &quot;Unpublished&quot; to retrieve all data from the term server regardless of versioned dates.
Use &quot;Feedback Fix&quot; to retrieve all data from the latest HotFix branch (Fix02, Fix03, etc) + the Production data in the Release Branch that has been versioned with the &quot;Effective Time&quot;.">Export Type</span>
                        </div>
                        <input type="text" class="form-control" disabled [value]="selectedBuild.configuration ? (selectedBuild.configuration.exportType ? (selectedBuild.configuration.exportType.replaceAll('_', ' ') | titlecase) : '' ) : ''">
                    </div>
                </div>
                <div *ngIf="selectedBuild.configuration?.branchPath && selectedBuild.configuration.loadTermServerData" class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Branch</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.branchPath">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Failure Max</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.qaTestConfig.maxFailureExport">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The year of release. Example: 2015">Readme End Date</span>
                        </div>
                        <input type="number" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.readmeEndDate">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates whether or not this is a first time release for a given product">First Time Release</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.firstTimeRelease">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates if the input files should just be packaged up (with no processing applied to them)">Just Package</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.justPackage">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicate whether or not the release is a beta release">Beta Release</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.betaRelease">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates whether  or not input file fixes are required">Input Files Fixes Required</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.inputFilesFixesRequired">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates whether or not to create the CTV3 IDâ€™s in the simpleMap refset files">Create Legacy Ids</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.createLegacyIds">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Allows classification in the preCondition checks">Use Classifier Precondition Checks</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.useClassifierPreConditionChecks">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates whether or not to run a classification against the output files">Classify Output Files</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.classifyOutputFiles">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Indicates whether the release build is an edition release or not">Release As An Edition</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.configuration.extensionConfig.releaseAsAnEdition">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Custom Refset Composite Keys</span>
                        </div>
                        <input #customRefsetCompositeKeys  type="text" disabled class="form-control">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The new files to be released for the first time for an existing product in subsequent releases">New RF2 Input Files</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.newRF2InputFiles">
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes the previous published package name to the SRS">Previous Published Release</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.previousPublishedPackage">
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The published international release package which an extension release is dependent on">Extension Dependency Release</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.extensionConfig.dependencyRelease">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The Previous Edition Dependency Effective Date is the Date of the International Edition that the previous Edition was based on. This field should ONLY be used for true &quot;Edition&quot; release packages">Previous Edition Dependency Effective Date</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.extensionConfig.previousEditionDependencyEffectiveDate">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Only used when combining different Delta files from previous releases into a new Delta release files using syntax format &quot;newFileName|(oldFile1, oldFile2, ...)&quot;. Most of the time, it should be left empty">Included Previous Release Files</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.includePrevReleaseFiles">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The Refset Descriptor exclusion list which is a comma separated string of member IDs. Example: uuid1,uuid2,...">Excluded Refset Descriptor Members</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.excludeRefsetDescriptorMembers">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Set of language refset IDs separated by comma. Example: refsetId1,refsetId2,...">Excluded Language refsets</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.excludeLanguageRefsetIds">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The namespace id for a given extension release">Namespace ID</span>
                        </div>
                        <input type="number" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.extensionConfig.namespaceId">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The module id(s) for a given extension. These should be comma separated">Module ID(s)</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.extensionConfig.moduleIds">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes the assertion group name(s) to the RVF for QA testing">Assertion Groups</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.qaTestConfig.assertionGroupNames">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes to RVF to enable the validations with Drools rules">Enable Drools</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.qaTestConfig.enableDrools">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes to RVF to run validation using Drools rules if the Enable Drools flag is checked. Values are a list of Drools rules groups separated by a comma">Drools Rules Group Names</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.qaTestConfig.droolsRulesGroupNames">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes to RVF to enable the validations with MRCM Validator">Enable MRCM</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" disabled [(ngModel)]="selectedBuild.qaTestConfig.enableMRCMValidation">
                            </div>
                        </div>
                    </div>
                </div>                
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Provide a list of conceptID and FSN's which will be used for the included modules + language refsets in the Release Package Information file">Concept Preferred Terms</span>
                        </div>
                        <input type="text" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.conceptPreferredTerms">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Passes to RVF to enable Traceability Validation. This option is only available for non Published Export types">Enable Traceability Validation</span>
                        </div>
                        <div class="input-group-append">
                            <div class="input-group-text bg-white">
                                <input type="checkbox" class="form-control" disabled [(ngModel)]="selectedBuild.qaTestConfig.enableTraceabilityValidation">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The readme header which will be used in Readme.txt">Readme Header</span>
                        </div>
                        <textarea rows="5" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.readmeHeader"></textarea>
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="Define the list of fields in JSON format which will be inlcuded in the Release Package Information file">Release Information Fields</span>
                        </div>
                        <textarea rows="5" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.additionalReleaseInformationFields"></textarea>
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" matTooltip="The licence statement which will be used in the Release Package Information file">License Statement</span>
                        </div>
                        <textarea rows="5" class="form-control" disabled [(ngModel)]="selectedBuild.configuration.licenceStatement"></textarea>
                    </div>
                </div>
            </div>
        </ng-container>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('view-build-configuration-modal')">CLOSE</button>
    </div>
</app-modal>

<app-modal id="build-success-modal" class="modal success-modal">
    <h3 header class="mb-0">Success</h3>
    <div body class="text-center p-5">
        <div class="text-left success pl-0"><i class="material-icons">check_circle</i>&nbsp;<div class="d-inline position-absolute pt-2">{{message}}</div></div>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('build-success-modal')">CLOSE</button>
    </div>
</app-modal>

<app-modal id="build-error-modal" class="modal error-modal">
    <h3 header class="mb-0">Error</h3>
    <div body class="text-center p-5">
        <div class="text-left error pl-0"><i class="material-icons">cancel</i>&nbsp;<div class="d-inline position-absolute pt-2">{{message}}</div></div>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('build-error-modal')">CLOSE</button>
    </div>
</app-modal>

<app-modal id="hide-build-confirmation-modal" class="modal add-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-center p-5">
        <p>Do you want to hide the build '{{selectedBuild?.id}}'?</p>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('hide-build-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="hideBuild()">ACCEPT</button>
    </div>
</app-modal>

<app-modal id="unhide-build-confirmation-modal" class="modal add-modal">
    <h3 header class="mb-0">Confirmation</h3>
    <div body class="text-center p-5">
        <p>Do you want to un-hide the build '{{selectedBuild?.id}}'?</p>
    </div>
    <div footer>
        <button type="button" class="btn" (click)="closeModal('unhide-build-confirmation-modal')">CANCEL</button>
        <button type="button" class="btn accept ml-3" (click)="unHideBuild()">ACCEPT</button>
    </div>
</app-modal>

<!--Build deletion confirmation-->
<app-modal id="publish-danger-modal" class="modal">
    <h3 header class="mb-0">Are you absolutely sure?</h3>
    <div body class="text-center">
        <p class="px-2 py-4 danger-text"><i class="fas fa-exclamation-triangle pr-3"></i>Unexpectedly bad things will happen if you don't read this!</p>
        <p class="px-2 py-1 information-text text-left">- This action <B>cannot</B> be undone.</p>
        <p class="px-2 py-1 information-text text-left">- The following changes are permanent.</p>
        <p class="px-2 py-1 information-text text-left">- You are about to publish a SNOMED-CT release package.</p>
        <p class="px-2 py-1 information-text text-left">- Please enter the release package effective time to confirm you understand this:</p>

        <div class="input-group input-group-lg px-2 mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Release Package Effective Time</span>
            </div>
            <input type="text" class="form-control" placeholder="" [(ngModel)]="dangerInput">
        </div>
    </div>

    <div footer>
        <button type="button" class="btn" (click)="closeModal('publish-danger-modal')">CANCEL</button>
        <button *ngIf="dangerInput === activeBuild?.configuration?.effectiveTime" type="button" [disabled]="false" (click)="publishBuild(activeBuild); closeModal('publish-danger-modal')" class="btn reject ml-3">I understand, publish the release</button>
        <button *ngIf="dangerInput !== activeBuild?.configuration?.effectiveTime" type="button" [disabled]="true" class="btn ml-3">I understand, publish the release</button>
    </div>
</app-modal>

