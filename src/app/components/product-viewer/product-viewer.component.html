<app-left-sidebar></app-left-sidebar>
<div *ngIf="activeReleaseCenter" class="product-viewer text-center">
    <h1 class="p-3">{{activeReleaseCenter?.name}}</h1>    
    <div class="container">
        <button class="btn-circle text-center mb-3 btn-blue float-right" data-toggle="tooltip" title="Add New Product" (click)="openModal('add-product-modal')"><i class="material-icons">add</i></button>
        <table class="table table-bordered" *ngIf="productsLoading">
            <tr>
                <th>Product</th>
                <th>Status</th>
                <th>Tag</th>
                <th></th>
            </tr>
            <tr>
                <td colspan="4">Loading...</td>
            </tr>           
        </table>
        <table class="table table-bordered" *ngIf="!productsLoading">
            <tr>
                <th>Product</th>
                <th>Status</th>
                <th>Tag</th>
                <th></th>
            </tr>
            <tr *ngIf="products?.length === 0">
                <td colspan="4">No products found.</td>
            </tr>
            <tr *ngFor="let product of products | paginate: {id: 'products_table', itemsPerPage: 10, currentPage: p, totalItems: products?.length}" routerLink="/{{activeReleaseCenter.id}}/{{product.id}}">
                <td class="text-left">{{product?.name}}</td>
                <td>{{product?.latestBuildStatus}}</td>
                <td>{{product?.latestTag}}</td>
                <td class="btn-groups"><button class="btn-green text-center" (click)="openModal('add-product-modal'); $event.stopPropagation()">Edit</button>
                    <button class="btn-mandy text-center ml-2" (click)="openModal('add-product-modal'); $event.stopPropagation()">Delete</button></td>
            </tr>
        </table>
        <pagination-controls id="products_table"
                      (pageChange)="p = $event"
                      maxSize="100"
                      directionLinks="true"
                      autoHide="true"
                      responsive="true"
                      previousLabel="Previous"
                      nextLabel="Next"
                      *ngIf="!productsLoading">
        </pagination-controls>
    </div>
</div>

<!-- ADD MODAL -->
<app-modal id="add-product-modal" class="modal add-modal" size="large">
    <h3 header class="mb-0">Create New Product</h3>
    <div body class="text-center p-5">
        <p>Please enter the details for the new Product</p>
        <input #addName class="w-75 rounded-lg p-3 m-3" type="text" placeholder="Name">
        <input #addShortName class="w-75 rounded-lg p-3 m-3" type="text" placeholder="Short Name">
    </div>

    <div footer>
        <!--div [@slide]="saved" class="px-3 error">{{saveResponse}}</div-->
        <button type="button" class="btn-sea-buckthorn" (click)="closeModal('add-product-modal')">Cancel</button>
        <button type="button" class="btn-blue">Save</button>
    </div>
</app-modal>
